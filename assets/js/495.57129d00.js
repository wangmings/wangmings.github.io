(window.webpackJsonp=window.webpackJsonp||[]).push([[495],{990:function(s,t,e){"use strict";e.r(t);var a=e(30),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"vue2-x源码分析-框架结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue2-x源码分析-框架结构"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#vue2-x%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90-%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84"}},[s._v("#")]),s._v(" Vue2.x源码分析 - 框架结构")]),s._v(" "),e("blockquote",[e("p",[s._v("看过Vue源码有一段时间了，对里面的研究也有一些心得。对于Vue源码分析文章，笔者以前不是很想写，因为网上有太多优质的Vue源码分析文章，笔者读源码时也受益于此。但思维的转变，发生在一次团队Code Review。笔者所在的团队主要使用Vue技术栈(团队小伙伴都是多面手，一专多能)，但有些小伙伴受限于业务开发，Vue停留在API使用层。所以笔者组织大家对Vue进行源码分析，各自分工并且每周Code Review分享给所有人，借此提升团队的工作效率，也形成一个良好的团队氛围。故以文字记录下来，一方面沉淀自己，另一方面也为团队code review做备忘录。")])]),s._v(" "),e("p",[s._v("笔者认为，读源码需要从全局到局部，先了解整个源码的目录结构，懂得项目里有哪些内容，然后列举出来，再通过个人兴趣研究点，逐个攻破。比如通读Vue目录结构，里面有core/compile/weex/ssr等，再提取出研究的web核心：双向数据绑定/组件系统/事件/生命周期/ast编译/vnode等。读源码切忌一行一行分析，这样容易陷入局部思考，也容易有挫折感。源码也不是只读一遍就能理解，所以需要反复回溯，细细思考。")]),s._v(" "),e("p",[s._v("源码分析顺序：")]),s._v(" "),e("ul",[e("li",[s._v("目录结构")]),s._v(" "),e("li",[s._v("核心内容")]),s._v(" "),e("li",[s._v("重点突破")]),s._v(" "),e("li",[s._v("回归溯源")])]),s._v(" "),e("h2",{attrs:{id:"目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),e("p",[s._v("思维导图可以清晰的了解到全局内容。看目录结构，除去build打包，类型定义以及ssr/weex，能了解到我们研究的核心就"),e("code",[s._v("compiler、core、platforms.web")]),s._v("三个文件夹。")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/4.png",alt:"image"}})]),s._v(" "),e("h2",{attrs:{id:"核心内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#核心内容"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#%E6%A0%B8%E5%BF%83%E5%86%85%E5%AE%B9"}},[s._v("#")]),s._v(" 核心内容")]),s._v(" "),e("p",[s._v("主要是Vue的几个核心：数据驱动、响应式原理、组件化、vdom diff算法等")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/5.png",alt:"image"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/6.png",alt:"image"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/7.png",alt:"image"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/8.png",alt:"image"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/9.png",alt:"image"}})]),s._v(" "),e("h2",{attrs:{id:"整体流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#整体流程"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B"}},[s._v("#")]),s._v(" 整体流程")]),s._v(" "),e("p",[s._v("下图整理了vue初始化流程以及代码流转，建议配合"),e("a",{attrs:{href:"https://ustbhuangyi.github.io/vue-analysis/prepare/entrance.html#vue-%E7%9A%84%E5%85%A5%E5%8F%A3",target:"_blank",rel:"noopener noreferrer"}},[s._v("Vue.js技术揭秘 (opens new window)"),e("OutboundLink")],1),s._v("文章去了解。")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images-1/10.png",alt:"image"}})]),s._v(" "),e("h2",{attrs:{id:"debug-vue源码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#debug-vue源码"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#debug-vue%E6%BA%90%E7%A0%81"}},[s._v("#")]),s._v(" Debug Vue源码")]),s._v(" "),e("p",[s._v("单纯看代码，特别是一些复杂逻辑时，容易绕进去，使得源码阅读效率降低。而debug源码能很好的知道关键地方的输入和输出，加快理解源码的速度。这里笔者也建议clone Vue源码后，设置以下debug设置，从而更好的调试源码。")]),s._v(" "),e("h3",{attrs:{id:"chrome调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#chrome调试"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#chrome%E8%B0%83%E8%AF%95"}},[s._v("#")]),s._v(" Chrome调试")]),s._v(" "),e("ol",[e("li",[e("p",[s._v("在配置文件scripts/config.js中，增加"),e("code",[s._v("sourceMap: true")]),s._v("。这样最终生成的dist/vue.js打包文件会带上源码的路径。")])]),s._v(" "),e("li",[e("p",[s._v("修改源码examples文件夹中案例，把引用的Vue包路径"),e("code",[s._v("改为“dist/vue.js”")])])])]),s._v(" "),e("h3",{attrs:{id:"vscode调试"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vscode调试"}},[s._v("#")]),s._v(" "),e("a",{attrs:{href:"#vscode%E8%B0%83%E8%AF%95"}},[s._v("#")]),s._v(" VSCode调试")]),s._v(" "),e("p",[s._v("在VSCode编辑器内，调试源码更方便。VSCode基本设置以及参数说明在笔者另外一篇博文"),e("RouterLink",{attrs:{to:"/blogs/node/node-vscode-debug.html"}},[s._v("Debug fro VSCode")]),s._v("有详细说明。如下给出最终vscode调试设置：")],1),s._v(" "),e("div",{staticClass:"language-JS line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[s._v("    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"version"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.2.0"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"configurations"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"type"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"chrome"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"request"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"launch"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Launch Chrome"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"url"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"file:///project-path/vue/examples/commits/index.html"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这里的project-path是你电脑上的根路径")]),s._v("\n            "),e("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"webRoot"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${workspaceFolder}/examples/commits/index.html"')]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n    \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);