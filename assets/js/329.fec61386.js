(window.webpackJsonp=window.webpackJsonp||[]).push([[329],{825:function(s,a,n){"use strict";n.r(a);var e=n(30),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"nginx配置密码访问网页"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置密码访问网页"}},[s._v("#")]),s._v(" Nginx配置密码访问网页")]),s._v(" "),n("p",[s._v("nginx做web服务，但由于安全问题需求，访问网页时需要输入用户名和密码进行认证")]),s._v(" "),n("p",[s._v("实现步骤：")]),s._v(" "),n("h2",{attrs:{id:"_1-安装密码生成工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装密码生成工具"}},[s._v("#")]),s._v(" 1.安装密码生成工具")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v(" yum -y install httpd-tools\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"_2-生成用户和密码文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-生成用户和密码文件"}},[s._v("#")]),s._v(" 2. 生成用户和密码文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ htpasswd -c /usr/local/nginx/password username\n# 回车后输入密码，就自动生成了一个含有账号密码的文件了\n# -c 创建一个加密文件\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("code",[s._v("password")]),s._v(" 是文件名称")]),s._v(" "),n("p",[n("code",[s._v("username")]),s._v(" 是自定义用户名")]),s._v(" "),n("h3",{attrs:{id:"查看生成的用户名和密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#查看生成的用户名和密码"}},[s._v("#")]),s._v(" 查看生成的用户名和密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cat /usr/local/nginx/password\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"删除用户和密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除用户和密码"}},[s._v("#")]),s._v(" 删除用户和密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ htpasswd -D /usr/local/nginx/password username\n# -D 删除指定的用户\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"修改用户和密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改用户和密码"}},[s._v("#")]),s._v(" 修改用户和密码")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("$ htpasswd -D /usr/local/nginx/password username\n$ htpasswd -b /usr/local/nginx/password username pass\n# -D 删除指定的用户\n# -b htpassswd命令行中一并输入用户名和密码而不是根据提示输入密码\n# -p htpassswd命令不对密码进行进行加密，即明文密码\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"_3-配置nginx认证"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置nginx认证"}},[s._v("#")]),s._v(" 3. 配置Nginx认证")]),s._v(" "),n("p",[s._v("找到 nginx 配置文件，通常默认的配置文件在"),n("code",[s._v("/usr/local/nginx/conf/nginx.conf")]),s._v("，要对整个站点开启验证，需在配置文件中的server加上认证配置\n"),n("code",[s._v("auth_basic")]),s._v(" 和 "),n("code",[s._v("auth_basic_user_file")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('server {\n  listen 80;\n  server_name  localhost;\n  # ...\n  \n  auth_basic "请输入用户和密码"; # 验证时的提示信息\n  auth_basic_user_file /usr/local/nginx/password; # 认证文件\n\n  location / {\n      root   /var/www;\n      index  index.html index.htm;\n  }\n  # ...\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h2",{attrs:{id:"_4-重启-重载nginx使站点的认证生效"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启-重载nginx使站点的认证生效"}},[s._v("#")]),s._v(" 4. 重启/重载Nginx使站点的认证生效")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/usr/local/nginx/sbin/nginx -s reload\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("参考文章 "),n("a",{attrs:{href:"https://segmentfault.com/a/1190000023086569",target:"_blank",rel:"noopener noreferrer"}},[s._v("Nginx配置密码访问-访问网页需输入用户名密码"),n("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=t.exports}}]);