(window.webpackJsonp=window.webpackJsonp||[]).push([[330],{824:function(s,e,a){"use strict";a.r(e);var t=a(30),r=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"docker使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker使用"}},[s._v("#")]),s._v(" docker使用")]),s._v(" "),a("p",[s._v("参考教程 "),a("a",{attrs:{href:"https://www.runoob.com/docker/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("菜鸟 docker教程"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),a("h3",{attrs:{id:"macos-docker-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos-docker-安装"}},[s._v("#")]),s._v(" MacOS Docker 安装")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://docs.docker.com/desktop/mac/install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker 官网下载"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("点击 "),a("code",[s._v("Mac with intel chip")]),s._v(" 按钮下载")]),s._v(" "),a("p",[s._v("如同 macOS 其它软件一样，安装也非常简单，双击下载的 .dmg 文件，然后将鲸鱼图标拖拽到 Application 文件夹即可。")]),s._v(" "),a("p",[s._v("从应用中找到 Docker 图标并点击运行。可能会询问 macOS 的登陆密码，输入即可。")]),s._v(" "),a("p",[s._v("启动终端后，通过命令可以检查安装后的 Docker 版本。")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" --version\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"macos-docker-镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos-docker-镜像加速"}},[s._v("#")]),s._v(" MacOS Docker 镜像加速")]),s._v(" "),a("p",[s._v("我们mac安装 docker 新版 2.2的时候，和菜鸟教程的版本不一样了。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/109485448",target:"_blank",rel:"noopener noreferrer"}},[s._v("MAC版 的最新Docker 2.2版本配置国内代理的解决办法"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("Preferences（就是设置图标） -> Docker Engine")]),s._v(" "),a("p",[s._v("在输入框中加上")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://docker.mirrors.ustc.edu.cn"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 中国某高等大学的")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hub-mirror.c.163.com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 网易的")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("点击按钮 "),a("code",[s._v("Apply & Restart")]),s._v(" 重启即可")]),s._v(" "),a("p",[s._v("在终端输入")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker info\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("能看到")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[s._v("Registry Mirrors:\nhttps://docker.mirrors.ustc.edu.cn/\nhttps://hub-mirror.c.163.com/\n")])])]),a("p",[s._v("就是成功了")]),s._v(" "),a("h3",{attrs:{id:"centos-docker-安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos-docker-安装"}},[s._v("#")]),s._v(" CentOs Docker 安装")]),s._v(" "),a("p",[s._v("使用官方安装脚本自动安装")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("启动 Docker。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl start docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"centos7-镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7-镜像加速"}},[s._v("#")]),s._v(" CentOS7 镜像加速")]),s._v(" "),a("p",[s._v("对于使用 systemd 的系统，请在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件）：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{"registry-mirrors":["https://reg-mirror.qiniu.com/"]}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("之后重新启动服务：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo systemctl daemon-reload\nsudo systemctl restart docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("code",[s._v("docker info")]),s._v(" 命令查看，结果内容中看到以下内容，说明配置成功。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Registry Mirrors:\n    https://reg-mirror.qiniu.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"docker-常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-常用命令"}},[s._v("#")]),s._v(" docker 常用命令")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("docker --version")]),s._v("      查看版本")]),s._v(" "),a("li",[a("code",[s._v("docker info")]),s._v("           查看配置信息")]),s._v(" "),a("li",[a("code",[s._v("docker pull [镜像地址]")]),s._v(" 下载镜像到本地")]),s._v(" "),a("li",[a("code",[s._v("docker images")]),s._v("         查看本地已安装的镜像\n"),a("ul",[a("li",[s._v("REPOSITORY：表示镜像的仓库源")]),s._v(" "),a("li",[s._v("TAG：       镜像的标签")]),s._v(" "),a("li",[s._v("IMAGE ID：  镜像ID")]),s._v(" "),a("li",[s._v("CREATED：   镜像创建时间")]),s._v(" "),a("li",[s._v("SIZE：      镜像大小")])])]),s._v(" "),a("li",[a("code",[s._v("docker build -t [镜像名称] .")]),s._v(" .是当前目录，根据当前目录的Dockerfile文件创建一个镜像")]),s._v(" "),a("li",[a("code",[s._v("docker rmi 镜像ID")]),s._v("  删除镜像")]),s._v(" "),a("li",[a("code",[s._v("docker ps")]),s._v("     查看每个容器的运行信息\n"),a("ul",[a("li",[s._v("CONTAINER ID: 容器 ID。\n"),a("ul",[a("li",[s._v("IMAGE:    使用的镜像。")]),s._v(" "),a("li",[s._v("COMMAND:  启动容器时运行的命令。")]),s._v(" "),a("li",[s._v("CREATED:  容器的创建时间。")]),s._v(" "),a("li",[s._v("STATUS:   容器状态，状态有7种：\n"),a("ul",[a("li",[s._v("created      （已创建）")]),s._v(" "),a("li",[s._v("restarting   （重启中）")]),s._v(" "),a("li",[s._v("running 或 Up（运行中）")]),s._v(" "),a("li",[s._v("removing     （迁移中）")]),s._v(" "),a("li",[s._v("paused       （暂停）")]),s._v(" "),a("li",[s._v("exited       （停止）")]),s._v(" "),a("li",[s._v("dead         （死亡）")]),s._v(" "),a("li",[s._v("PORTS: 容器的端口信息和使用的连接类型（tcp\\udp）。")]),s._v(" "),a("li",[s._v("NAMES: 自动分配的容器名称。")])])])])])])]),s._v(" "),a("li",[a("code",[s._v("docker ps -a")]),s._v("      查看每个容器（包括已经暂停的）的运行信息")]),s._v(" "),a("li",[a("code",[s._v("docker run -itd -p 8080:80 --name vueapp [镜像名称]")]),s._v(" 使用某个镜像启动一个容器， -d 后台开启")]),s._v(" "),a("li",[a("code",[s._v("docker stop [CONTAINER ID]")]),s._v(" 停止指定的容器")]),s._v(" "),a("li",[a("code",[s._v("docker start [CONTAINER ID]")]),s._v(" 启动指定的容器")]),s._v(" "),a("li",[a("code",[s._v("docker restart <容器 ID>")]),s._v("     重启指定的容器")]),s._v(" "),a("li",[a("code",[s._v("docker rm -f [CONTAINER ID]")]),s._v(" 删除指定的容器")]),s._v(" "),a("li",[a("code",[s._v("docker container prune")]),s._v("      删除掉所有处于终止状态的容器")]),s._v(" "),a("li",[a("code",[s._v("docker exec -it [容器 id] /bin/bash")]),s._v(" 进入容器( 要启动状态才能进入 )")]),s._v(" "),a("li",[a("code",[s._v("docker logs [CONTAINER ID]")]),s._v("  查看容器内的标准输出")]),s._v(" "),a("li",[a("code",[s._v("docker export [CONTAINER ID] > node.tar")]),s._v("  导出容器")]),s._v(" "),a("li",[a("code",[s._v("docker logout localhost:8080")]),s._v("   退出登录")]),s._v(" "),a("li",[a("code",[s._v("docker login --username=xxx --password=xxx registry.cn-shenzhen.aliyuncs.com")]),s._v(" 登录")]),s._v(" "),a("li",[a("code",[s._v("docker tag [ImageId] xxx/namespace/vueapp:[镜像版本号]")])])]),s._v(" "),a("h4",{attrs:{id:"批量操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#批量操作"}},[s._v("#")]),s._v(" 批量操作")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("docker ps -aq")]),s._v("                  列出所有的容器 ID")]),s._v(" "),a("li",[a("code",[s._v("docker stop $(docker ps -aq)")]),s._v("   停止所有的容器")]),s._v(" "),a("li",[a("code",[s._v("docker rm $(docker ps -aq)")]),s._v("     删除所有的容器")]),s._v(" "),a("li",[a("code",[s._v("docker rmi $(docker images -q)")]),s._v(" 删除所有的镜像")]),s._v(" "),a("li",[a("code",[s._v("docker image prune --force --all")]),s._v("或者"),a("code",[s._v("docker image prune -f -a")]),s._v("  删除所有不使用的镜像")]),s._v(" "),a("li",[a("code",[s._v("docker container prune -f")]),s._v("      删除所有停止的容器")])]),s._v(" "),a("h2",{attrs:{id:"docker-容器的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器的使用"}},[s._v("#")]),s._v(" docker 容器的使用")]),s._v(" "),a("h3",{attrs:{id:"_1-先获取镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-先获取镜像"}},[s._v("#")]),s._v(" 1. 先获取镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-启动容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动容器"}},[s._v("#")]),s._v(" 2. 启动容器")]),s._v(" "),a("p",[s._v("以下命令使用 node 镜像启动一个容器，参数为以命令行模式进入该容器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -it --name node-test node /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("参数说明：")]),s._v(" "),a("ul",[a("li",[s._v("-i: 交互式操作。")]),s._v(" "),a("li",[s._v("-t: 终端。")]),s._v(" "),a("li",[s._v("node: node 镜像。")]),s._v(" "),a("li",[s._v("name: 自定义容器名称")]),s._v(" "),a("li",[s._v("/bin/bash：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 /bin/bash。")])]),s._v(" "),a("p",[s._v("要退出终端，直接输入 "),a("code",[s._v("exit")])]),s._v(" "),a("h3",{attrs:{id:"启动已停止运行的容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动已停止运行的容器"}},[s._v("#")]),s._v(" 启动已停止运行的容器")]),s._v(" "),a("p",[s._v("查看所有的容器命令如下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker ps -a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用 "),a("code",[s._v("docker start")]),s._v(" 启动一个已停止的容器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker start b750bbbcfd88 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"后台运行容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后台运行容器"}},[s._v("#")]),s._v(" 后台运行容器")]),s._v(" "),a("p",[s._v("在大部分的场景下，我们希望 docker 的服务是在后台运行的，我们可以过 "),a("code",[s._v("-d")]),s._v(" 指定容器的运行模式。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -itd --name node-test node\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("注：加了 "),a("code",[s._v("-d")]),s._v("参数默认不会进入容器，想要进入容器需要使用指令 "),a("code",[s._v("docker exec")]),s._v("（下面会介绍到）。")]),s._v(" "),a("h3",{attrs:{id:"进入容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入容器"}},[s._v("#")]),s._v(" 进入容器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it [容器 id] /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"导出容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导出容器"}},[s._v("#")]),s._v(" 导出容器")]),s._v(" "),a("p",[s._v("如果要导出本地某个容器，可以使用 docker export 命令。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker export [容器 id] > node.tar\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样将导出容器快照到本地文件。")]),s._v(" "),a("h3",{attrs:{id:"导入容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入容器"}},[s._v("#")]),s._v(" 导入容器")]),s._v(" "),a("h2",{attrs:{id:"docker-安装-centos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-centos"}},[s._v("#")]),s._v(" Docker 安装 CentOS")]),s._v(" "),a("p",[s._v("1、查看可用的 CentOS 版本")]),s._v(" "),a("p",[s._v("访问 CentOS 镜像库地址："),a("a",{attrs:{href:"https://hub.docker.com/_/centos?tab=tags&page=1",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/centos?tab=tags&page=1"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("2、拉取指定版本的 CentOS 镜像，这里我们安装指定版本为例(centos7):")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull centos:centos7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、查看本地镜像")]),s._v(" "),a("p",[s._v("使用以下命令来查看是否已安装了 centos7：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、运行容器")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -itd --name centos-test centos:centos7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("5、 查看容器的运行信息")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker ps\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("5、并且可以通过 exec 命令进入 CentOS 容器。(相当于进入 centOS 系统，想退出系统可以使用 exit)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it centos-test /bin/bash\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"docker-安装-nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-nginx"}},[s._v("#")]),s._v(" Docker 安装 Nginx")]),s._v(" "),a("p",[s._v("1、查看可用的 Nginx 版本")]),s._v(" "),a("p",[s._v("访问 Nginx 镜像库地址： "),a("a",{attrs:{href:"https://hub.docker.com/_/nginx?tab=tags",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/nginx?tab=tags"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("p",[s._v("2、取最新版的 Nginx 镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull nginx:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、查看本地镜像")]),s._v(" "),a("p",[s._v("使用以下命令来查看是否已安装了 nginx：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、运行容器")]),s._v(" "),a("p",[s._v("安装完成后，我们可以使用以下命令来运行 nginx 容器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run --name nginx-test -p 8080:80 -d nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("参数说明：")]),s._v(" "),a("ul",[a("li",[s._v("--name nginx-test：容器名称。")]),s._v(" "),a("li",[s._v("-p 8080:80： 端口进行映射，将本地 8080 端口映射到容器内部的 80 端口。")]),s._v(" "),a("li",[s._v("-d nginx： 设置容器在在后台一直运行。")])]),s._v(" "),a("p",[s._v("5、最后我们可以通过浏览器可以直接访问 8080 端口的 nginx 服务：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("localhost:8080\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"docker-安装-node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装-node-js"}},[s._v("#")]),s._v(" Docker 安装 Node.js")]),s._v(" "),a("p",[s._v("1、查看可用的 Node 版本")]),s._v(" "),a("p",[s._v("访问 Node 镜像库地址： "),a("a",{attrs:{href:"https://hub.docker.com/_/node?tab=tags",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://hub.docker.com/_/node?tab=tags"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("2、取最新版的 node 镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker pull node:latest\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3、查看本地镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("4、运行容器")]),s._v(" "),a("p",[s._v("安装完成后，我们可以使用以下命令来运行 node 容器")]),s._v(" "),a("p",[s._v("参数说明：")]),s._v(" "),a("p",[s._v("--name node-test：容器名称。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker run -itd --name node-test node\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("5、最后进入查看容器运行的 node 版本:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker exec -it node-test /bin/bash\n\nnode -v\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),a("p",[s._v("Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("FROM：")]),s._v("定制的镜像都是基于 FROM 的镜像，这里的 nginx 就是定制需要的"),a("code",[s._v("基础镜像")]),s._v("。后续的操作都是基于 nginx。")]),s._v(" "),a("li",[a("code",[s._v("RUN：")]),s._v("用于执行后面跟着的命令行命令。有以下俩种格式：")])]),s._v(" "),a("p",[s._v("shell 格式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("RUN <命令行命令>\n# <命令行命令> 等同于，在终端操作的 shell 命令。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("exec 格式：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('RUN ["可执行文件", "参数1", "参数2"]\n# 例如：\n# RUN ["./test.php", "dev", "offline"] 等价于 RUN ./test.php dev offline\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("注意：Dockerfile 的指令每执行一次都会在 docker 上新建一层。所以过多无意义的层，会造成镜像膨胀过大。例如：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('FROM centos\nRUN yum install wget\nRUN wget -O redis.tar.gz "http://download.redis.io/releases/redis-5.0.3.tar.gz"\nRUN tar -xvf redis.tar.gz\n以上执行会创建 3 层镜像。可简化为以下格式：\nFROM centos\nRUN yum install wget \\\n    && wget -O redis.tar.gz "http://download.redis.io/releases/redis-5.0.3.tar.gz" \\\n    && tar -xvf redis.tar.gz\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("如上，以 && 符号连接命令，这样执行后，只会创建 1 层镜像。")]),s._v(" "),a("h4",{attrs:{id:"创建镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像"}},[s._v("#")]),s._v(" 创建镜像")]),s._v(" "),a("p",[s._v("-t 是给镜像命名 . 是基于当前目录的Dockerfile来构建镜像")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker build -t vuenginxcontainer .\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"项目的dockerfile文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目的dockerfile文件"}},[s._v("#")]),s._v(" 项目的"),a("code",[s._v("Dockerfile")]),s._v("文件")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Dockerfile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("node")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14.15")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" builder\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("WORKDIR")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RUN")]),s._v(" npm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("registry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("taobao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RUN")]),s._v(" npm run build\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FROM")]),s._v(" nginx\n\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dist "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("COPY")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("from"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("builder "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("app"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("default")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CMD")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nginx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-g"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"daemon off;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("我们来分析下上的代码：")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v("FROM node:14.15.3 as builder")]),s._v("  安装使用node:14.15.3镜像，并给他应该别名 builder")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("COPY . /app")]),s._v(" 拷贝当前目录所有文件，放到镜像的"),a("code",[s._v("/app")]),s._v("目录下，  "),a("code",[s._v(".")]),s._v("就是代表当前目录 "),a("code",[s._v("/app")]),s._v(" 代表在镜像上的目录路径")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("WORKDIR /app")]),s._v(" 镜像内的工作目录是 "),a("code",[s._v("app")]),s._v("， 就是你使用命令进入镜像的时候，终端左边的目录就是"),a("code",[s._v("app")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("RUN npm install --registry=https://registry.npm.taobao.org")]),s._v(" "),a("code",[s._v("RUN")]),s._v("是执行命令，执行了后面的命令 npm install")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("RUN npm run build")]),s._v(" 执行了 npm run build")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("FROM nginx")]),s._v(" 安装使用nginx镜像")])]),s._v(" "),a("li",[a("p",[a("code",[s._v("COPY --from=builder /app/dist /usr/share/nginx/html")]),s._v("  --from=builder 是等待上面的安装完成后（也就是等 FROM nginx上面的命令都执行完之后，才执行） 注意，这里为什么要用 "),a("code",[s._v("/app/dist")]),s._v("， 因为上面上面设置了 "),a("code",[s._v("WORKDIR /app")]),s._v(", 然后我们 --from=builder 等待上面的命令生成，这时的镜像工作目录是"),a("code",[s._v("/app")]),s._v("，"),a("code",[s._v("/app")]),s._v("目录下已经有了dist文件夹内容，因为我们在镜像内执行了命令"),a("code",[s._v("npm run build")]),s._v("，所以我们可以直接从镜像的路径 "),a("code",[s._v("/app/dist")]),s._v(" 拷贝到 "),a("code",[s._v("/usr/share/nginx/html")])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("COPY --from=builder /app/nginx/default.conf /etc/nginx/conf.d/default.conf")]),s._v(" 同上原理")])]),s._v(" "),a("li",[a("p",[a("code",[s._v('CMD ["nginx", "-g", "daemon off;"]')]),s._v(" 为了防止docker容器执行完命令挂掉（想了解更多，可以自行谷歌，也可以参考"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000009583997",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker运行nginx为什么要使用 daemon off"),a("OutboundLink")],1),s._v("）")])])]),s._v(" "),a("p",[s._v("由于我们上面用到了"),a("code",[s._v("nginx")]),s._v("，而且用到了 "),a("code",[s._v("/app/nginx/default.conf")]),s._v(" 路径")]),s._v(" "),a("p",[s._v("所以我们得在项目根目录新建个"),a("code",[s._v("nginx文件夹")]),s._v("，"),a("code",[s._v("nginx文件夹")]),s._v("里面新建个"),a("code",[s._v("default.conf文件")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// default.conf")]),s._v("\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen       "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name  localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    #charset koi8"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    access_log  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("host"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("access"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log  main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    error_log  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log  error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index  index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("htm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    #error_page  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    # redirect server error pages to the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" page "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("50x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html\n    #\n    error_page   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("503")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("504")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("50x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("50x"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        root   "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("share"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[a("code",[s._v(".dockerignore")]),s._v(" 指定在传递给 docker引擎 时需要忽略掉的文件或文件夹。")]),s._v(" "),a("h2",{attrs:{id:"常见错误"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见错误"}},[s._v("#")]),s._v(" 常见错误")]),s._v(" "),a("h3",{attrs:{id:"上传自己的镜像被拒绝denied-requested-access-to-the-resource-is-denied"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传自己的镜像被拒绝denied-requested-access-to-the-resource-is-denied"}},[s._v("#")]),s._v(" 上传自己的镜像被拒绝denied: requested access to the resource is denied")]),s._v(" "),a("p",[s._v("信息显示是拒接访问，因为tag的名字斜线前面部分不是本人的用户名，下面把它修改为mydockerapp/xxxxx就push成功。需要注意的是mydockerapp是本人的docker用户名。进入docker hub网站查看，发现多了一个公共的repository。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker login --username=xxx xxx.com\ndocker tag [ImageId] xxx/namespace/vueapp:[镜像版本号]\ndocker push xxx/namespace/vueapp:[镜像版本号]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);