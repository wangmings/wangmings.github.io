(window.webpackJsonp=window.webpackJsonp||[]).push([[537],{1032:function(s,t,a){"use strict";a.r(t);var e=a(30),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"vscode插件开发实践"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode插件开发实践"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#vscode%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5"}},[s._v("#")]),s._v(" VSCode插件开发实践")]),s._v(" "),a("p",[s._v("开发项目过程中，避免不了工具函数书写。当开发另外一个项目时，经常需要搜索项目，打开并找到对应工具函数拷贝。这种方式容易打断工作流程，而使用vscode插件可以在不离开IDE前提下，快速找到对应实用工具。")]),s._v(" "),a("blockquote",[a("p",[s._v("以下实践代码可到github "),a("a",{attrs:{href:"https://github.com/lq782655835/common-utils",target:"_blank",rel:"noopener noreferrer"}},[s._v("lq782655835/common -utils (opens new window)"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"开发插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发插件"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E5%BC%80%E5%8F%91%E6%8F%92%E4%BB%B6"}},[s._v("#")]),s._v(" 开发插件")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/api/get-started/your-first-extension",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方开发插件教程 (opens new window)"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("官方已经把插件模板集成到yeoman（类似cli工具）中，十分方便开发者开发新插件。安装工具和模版：")]),s._v(" "),a("div",{staticClass:"language-JS line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g yo generator"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("code\n    yo code "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生成模版")]),s._v("\n    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("ol",[a("li",[s._v("生成模板后，最重要的是了解package.json，因为大部分设置都是在这设置。")])]),s._v(" "),a("div",{staticClass:"language-JS line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件名称")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"displayName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件显示名称")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"description"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Air Quaility"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件描述")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件版本")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"publisher"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"beanleecode"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件发布者")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logo.png"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 插件的icon，不支持svg，最小图片大小128*128")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"activationEvents"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 活动事件列表（哪些命令是激活的）")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"onCommand:extension.sayHello"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"main"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./extension"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 代码书写主入口")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"contributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"commands"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 对应命令列表")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"command"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"extension.sayHello"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 命令名，必须与上面activationEvents一致")]),s._v("\n                    "),a("span",{pre:!0,attrs:{class:"token string-property property"}},[s._v('"title"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 命令显示解释")]),s._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("调试F5")])]),s._v(" "),a("p",[s._v("就是这么简单。VSCode 会启动一个新窗口供测试，十分方便。")]),s._v(" "),a("h2",{attrs:{id:"发布插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布插件"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E5%8F%91%E5%B8%83%E6%8F%92%E4%BB%B6"}},[s._v("#")]),s._v(" 发布插件")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/api/working-with-extensions/publishing-extension",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方发布插件教程 (opens new window)"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("发布过程都依赖"),a("code",[s._v("vsce")]),s._v("工具，这是一个npm包，安装十分便捷：")]),s._v(" "),a("div",{staticClass:"language-JS line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    npm i vsce "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("g\n    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"发布方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布方式"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E5%8F%91%E5%B8%83%E6%96%B9%E5%BC%8F"}},[s._v("#")]),s._v(" 发布方式")]),s._v(" "),a("ol",[a("li",[s._v("直接把文件夹发给别人，让别人找到vscode的插件存放目录并放进去，然后重启vscode，一般不推荐；")]),s._v(" "),a("li",[s._v("打包成vsix插件，然后发送给别人安装，如果你的插件涉及机密不方便发布到应用市场，可以尝试采用这种方式；")]),s._v(" "),a("li",[s._v("注册开发者账号，发布到官网应用市场，这个发布和npm一样是不需要审核的。")])]),s._v(" "),a("h2",{attrs:{id:"本地打包方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#本地打包方式"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E6%9C%AC%E5%9C%B0%E6%89%93%E5%8C%85%E6%96%B9%E5%BC%8F"}},[s._v("#")]),s._v(" 本地打包方式")]),s._v(" "),a("p",[s._v("打包成vsix文件：")]),s._v(" "),a("div",{staticClass:"language-JS line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("    vsce "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v("\n    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("当遇到全局安装了vsce，但vsce命令找不到，请检查是否使用了nvm等node管理工具，并切换到指定的node版本。")])]),s._v(" "),a("h2",{attrs:{id:"在线发布方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在线发布方式"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E5%9C%A8%E7%BA%BF%E5%8F%91%E5%B8%83%E6%96%B9%E5%BC%8F"}},[s._v("#")]),s._v(" 在线发布方式")]),s._v(" "),a("ol",[a("li",[s._v("在"),a("a",{attrs:{href:"https://account.microsoft.com/?lang=zh-CN&refd=account.live.com&refp=landing&mkt=ZH-CN",target:"_blank",rel:"noopener noreferrer"}},[s._v("Visual Studio Team Services (opens new window)"),a("OutboundLink")],1),s._v(" 创建一个账号")]),s._v(" "),a("li",[s._v("创建token\n"),a("ul",[a("li",[s._v("点击右上角的个人信息security，再点击create token")]),s._v(" "),a("li",[s._v("name随便填写，expires In最好选最长时间，"),a("code",[s._v("Accounts一定要选All accessible accounts")]),s._v("，Authorized Scopes选择 All Scopes。")]),s._v(" "),a("li",[s._v("create后会给你一个token值，它只显示一次，务必要保留，之后命令行操作会使用到。")])])]),s._v(" "),a("li",[s._v("借助vsce工具上传到商店。\n"),a("ol",[a("li",[a("code",[s._v("vsce create-publisher (name)")]),s._v(" 创建publisher，这个步骤会让你填写name、email以及上步获得的token")]),s._v(" "),a("li",[a("code",[s._v("vsce publish (version)")]),s._v(" 发布到在线商店（依赖于上一步，已创建publisher并登录）")])])])]),s._v(" "),a("h4",{attrs:{id:"注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"}},[s._v("#")]),s._v(" 注意事项")]),s._v(" "),a("ul",[a("li",[s._v("类似npm包，README.md文件默认会显示在插件主页；")]),s._v(" "),a("li",[s._v("增量发布可以修改package.json的version外，还可以使用代号：major/minor/patch，如：vsce publish patch")])])])}),[],!1,null,null,null);t.default=n.exports}}]);