(window.webpackJsonp=window.webpackJsonp||[]).push([[391],{886:function(s,a,t){"use strict";t.r(a);var n=t(30),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"框架设计思路分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#框架设计思路分析"}},[s._v("#")]),s._v(" 框架设计思路分析")]),s._v(" "),t("h5",{attrs:{id:"目标"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#目标"}},[s._v("#")]),s._v(" 目标")]),s._v(" "),t("ol",[t("li",[s._v("回顾并掌握scrapy的模块的作用")]),s._v(" "),t("li",[s._v("回顾并掌握scrapy的数据的传递过程")]),s._v(" "),t("li",[s._v("能够说出自己要实现的框架包含的模块和模块的作用")])]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"_1-学习scrapy-提取它的设计思想-idea"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-学习scrapy-提取它的设计思想-idea"}},[s._v("#")]),s._v(" 1.学习Scrapy，提取它的设计思想(idea)")]),s._v(" "),t("h5",{attrs:{id:"_1-1-爬虫的流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-爬虫的流程"}},[s._v("#")]),s._v(" 1.1 爬虫的流程")]),s._v(" "),t("p",[s._v("爬虫框架解决的问题是爬虫问题，先来看看爬虫的基本流程：")]),s._v(" "),t("ol",[t("li",[s._v("构建请求信息(url、method、headers、params、data)")]),s._v(" "),t("li",[s._v("发起HTTP/HTTPS请求，获取HTTP/HTTPS响应")]),s._v(" "),t("li",[s._v("解析响应，分析响应数据的数据结构或者页面结构\n"),t("ul",[t("li",[s._v("\b提取数据")]),s._v(" "),t("li",[s._v("提取请求的地址")])])]),s._v(" "),t("li",[s._v("对数据进行存储/对新的请求地址重复前面的步骤")])]),s._v(" "),t("p",[s._v("无论什么爬虫框架，其核心都离不开上面几个步骤")]),s._v(" "),t("h5",{attrs:{id:"_1-2-分析scrapy爬虫流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-分析scrapy爬虫流程"}},[s._v("#")]),s._v(" 1.2 分析scrapy爬虫流程")]),s._v(" "),t("p",[s._v("分析目标：")]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 分析各个组件的功能和作用\nb"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 分析各个组件之间的协作关系\nc"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" 对组件进行大致的分类"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("核心和次要"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"/assets/images/scrapy%E6%B5%81%E7%A8%8B%E5%9B%BE.png",alt:"Scrapy流程图"}})]),s._v(" "),t("h3",{attrs:{id:"_2-scrapy爬虫流程分析结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-scrapy爬虫流程分析结果"}},[s._v("#")]),s._v(" 2.scrapy爬虫流程分析结果")]),s._v(" "),t("p",[s._v("Scrapy流程分析图 "),t("img",{attrs:{src:"/assets/images/Scrapy%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%E5%9B%BE.png",alt:"Scrapy流程分析图.png"}})]),s._v(" "),t("ol",[t("li",[s._v("三个内置对象：")])]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v(" 请求对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n 响应对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n 数据对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("五个核心组件：")])]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v(" 爬虫组件\n     构建请求信息"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("初始的"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，也就是生成请求对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     解析响应对象，返回数据对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("或者新的请求对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n 调度器组件\n     缓存请求对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，并为下载器提供请求对象，实现请求的调度\n     对请求对象进行去重判断\n 下载器组件\n     根据请求对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，发起HTTP、HTTPS网络请求，拿到HTTP、HTTPS响应，构建响应对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Response"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("并返回\n 管道组件\n     负责处理数据对象"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Item"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n 引擎组件\n     负责驱动各大组件，通过调用各自对外提供的API接口，实现它们之间的交互和协作\n     提供整个框架的启动入口 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("两个中间件：")])]),s._v(" "),t("div",{staticClass:"language-Python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v(" 爬虫中间件\n     对请求对象和数据对象进行预处理\n\n 下载器中间件\n     对请求对象和响应对象进行预处理 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("那么对应的，我们也可以在自己的框架是实现这样几个模块和对象")]),s._v(" "),t("hr"),s._v(" "),t("h3",{attrs:{id:"小结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),t("ol",[t("li",[s._v("掌握scrapy的模块的作用")]),s._v(" "),t("li",[s._v("\b掌握scrapy的数据的传递过程")])])])}),[],!1,null,null,null);a.default=e.exports}}]);