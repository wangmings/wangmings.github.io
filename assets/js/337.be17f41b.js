(window.webpackJsonp=window.webpackJsonp||[]).push([[337],{832:function(t,s,a){"use strict";a.r(s);var r=a(30),e=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"requests模块的深入使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requests模块的深入使用"}},[t._v("#")]),t._v(" requests模块的深入使用")]),t._v(" "),a("h5",{attrs:{id:"学习目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[t._v("#")]),t._v(" 学习目标：")]),t._v(" "),a("ol",[a("li",[t._v("能够应用requests发送post请求的方法")]),t._v(" "),a("li",[t._v("能够应用requests模块使用代理的方法")]),t._v(" "),a("li",[t._v("了解代理ip的分类")])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_1-使用requests发送post请求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用requests发送post请求"}},[t._v("#")]),t._v(" 1 使用requests发送POST请求")]),t._v(" "),a("blockquote",[a("p",[t._v("思考：哪些地方我们会用到POST请求？")])]),t._v(" "),a("ol",[a("li",[t._v("登录注册（ POST 比 GET 更安全）")]),t._v(" "),a("li",[t._v("需要传输大文本内容的时候（ POST 请求对数据长度没有要求）")])]),t._v(" "),a("p",[t._v("所以同样的，我们的爬虫也需要在这两个地方回去模拟浏览器发送post请求")]),t._v(" "),a("h5",{attrs:{id:"_1-1-requests发送post请求语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-requests发送post请求语法"}},[t._v("#")]),t._v(" 1.1 requests发送post请求语法：")]),t._v(" "),a("ul",[a("li",[t._v("用法：")])]),t._v(" "),a("div",{staticClass:"language-Python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v(" response "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("post"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.baidu.com/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \\\n  data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("headers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("ul",[a("li",[t._v("data 的形式：字典")])]),t._v(" "),a("h5",{attrs:{id:"_1-2-post请求练习"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-post请求练习"}},[t._v("#")]),t._v(" 1.2 POST请求练习")]),t._v(" "),a("p",[t._v("下面面我们通过手机版百度翻译的例子看看post请求如何使用：")]),t._v(" "),a("p",[t._v("地址："),a("a",{attrs:{href:"http://fanyi.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://fanyi.baidu.com/"),a("OutboundLink")],1)]),t._v(" "),a("h5",{attrs:{id:"思路分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思路分析"}},[t._v("#")]),t._v(" 思路分析")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("抓包确定请求的url地址")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/15301651514308.jpg",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("确定请求的参数")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/15301651723460.jpg",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("确定返回数据的位置")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/15301651877943.jpg",alt:""}})])]),t._v(" "),a("li",[a("p",[t._v("模拟浏览器获取数据")])])]),t._v(" "),a("h4",{attrs:{id:"_1-3-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-小结"}},[t._v("#")]),t._v(" 1.3 小结")]),t._v(" "),a("p",[t._v("在模拟登陆等场景，经常需要发送post请求，直接使用"),a("code",[t._v("requests.post(url,data)")]),t._v("即可")]),t._v(" "),a("h3",{attrs:{id:"_2-使用代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-使用代理"}},[t._v("#")]),t._v(" 2 使用代理")]),t._v(" "),a("h5",{attrs:{id:"_2-1-为什么要使用代理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-为什么要使用代理"}},[t._v("#")]),t._v(" 2.1 为什么要使用代理")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("让服务器以为不是同一个客户端在请求")])]),t._v(" "),a("li",[a("p",[t._v("防止我们的真实地址被泄露，防止被追究")])])]),t._v(" "),a("h5",{attrs:{id:"_2-2-理解使用代理的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-理解使用代理的过程"}},[t._v("#")]),t._v(" 2.2 理解使用代理的过程")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86%E7%9A%84%E8%BF%87%E7%A8%8B.png",alt:""}})]),t._v(" "),a("h5",{attrs:{id:"_2-3-理解正向代理和反向代理的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-理解正向代理和反向代理的区别"}},[t._v("#")]),t._v(" 2.3 理解正向代理和反向代理的区别")]),t._v(" "),a("p",[a("img",{attrs:{src:"/assets/images/%E6%AD%A3%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E5%8C%BA%E5%88%AB.png",alt:""}})]),t._v(" "),a("p",[t._v("通过上图可以看出：")]),t._v(" "),a("ul",[a("li",[t._v("正向代理：对于浏览器知道服务器的真实地址，例如VPN")]),t._v(" "),a("li",[t._v("反向代理：浏览器不知道服务器的真实地址，例如nginx")])]),t._v(" "),a("h5",{attrs:{id:"_2-4-代理的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-代理的使用"}},[t._v("#")]),t._v(" 2.4 代理的使用")]),t._v(" "),a("ul",[a("li",[t._v("用法：")])]),t._v(" "),a("div",{staticClass:"language-Python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v(" requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://www.baidu.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  proxies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" proxies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[a("p",[t._v("proxies的形式：字典")])]),t._v(" "),a("li",[a("p",[t._v("例如：")])])]),t._v(" "),a("div",{staticClass:"language-Python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v(" proxies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://12.34.56.79:9527"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://12.34.56.79:9527"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("h5",{attrs:{id:"_2-5-代理ip的分类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-代理ip的分类"}},[t._v("#")]),t._v(" 2.5 代理IP的分类")]),t._v(" "),a("p",[t._v("根据代理ip的匿名程度，代理IP可以分为下面四类：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("透明代理(Transparent Proxy)：透明代理虽然可以直接“隐藏”你的IP地址，但是还是可以查到你是谁。")])]),t._v(" "),a("li",[a("p",[t._v("匿名代理(Anonymous Proxy)：使用匿名代理，别人只能知道你用了代理，无法知道你是谁。")])]),t._v(" "),a("li",[a("p",[t._v("高匿代理(Elite proxy或High Anonymity Proxy)：高匿代理让别人根本无法发现你是在用代理，所以是最好的选择。")])])]),t._v(" "),a("p",[t._v("在使用的使用，毫无疑问使用高匿代理效果最好")]),t._v(" "),a("p",[t._v("从请求使用的协议可以分为：")]),t._v(" "),a("ul",[a("li",[t._v("http代理")]),t._v(" "),a("li",[t._v("https代理")]),t._v(" "),a("li",[t._v("socket代理等")])]),t._v(" "),a("p",[t._v("不同分类的代理，在使用的时候需要根据抓取网站的协议来选择")]),t._v(" "),a("h5",{attrs:{id:"_2-6-代理ip使用的注意点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-代理ip使用的注意点"}},[t._v("#")]),t._v(" 2.6 代理IP使用的注意点")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("反反爬")]),t._v(" "),a("p",[t._v("使用代理ip是非常必要的一种"),a("code",[t._v("反反爬")]),t._v("的方式")]),t._v(" "),a("p",[t._v("但是即使使用了代理ip，对方服务器任然会有很多的方式来检测我们是否是一个爬虫，比如：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("一段时间内，检测IP访问的频率，访问太多频繁会屏蔽")])]),t._v(" "),a("li",[a("p",[t._v("检查Cookie，User-Agent，Referer等header参数，若没有则屏蔽")])]),t._v(" "),a("li",[a("p",[t._v("服务方购买所有代理提供商，加入到反爬虫数据库里，若检测是代理则屏蔽")]),t._v(" "),a("p",[t._v("所以更好的方式在使用代理ip的时候使用随机的方式进行选择使用，不要每次都用一个代理ip")])])])]),t._v(" "),a("li",[a("p",[t._v("代理ip池的更新")]),t._v(" "),a("p",[t._v("购买的代理ip很多时候大部分(超过60%)可能都没办法使用，这个时候就需要通过程序去检测哪些可用，把不能用的删除掉。")])])]),t._v(" "),a("hr"),t._v(" "),a("h3",{attrs:{id:"_3-小结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-小结"}},[t._v("#")]),t._v(" 3 小结")]),t._v(" "),a("ol",[a("li",[t._v("requests发送post请求使用requests.post方法，带上请求体，其中请求体需要时字典的形式，传递给data参数接收")]),t._v(" "),a("li",[t._v("在requests中使用代理，需要准备字典形式的代理，传递给proxies参数接收")]),t._v(" "),a("li",[t._v("不同协议的url地址，需要使用不同的代理去请求")])])])}),[],!1,null,null,null);s.default=e.exports}}]);