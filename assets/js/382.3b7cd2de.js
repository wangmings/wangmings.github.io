(window.webpackJsonp=window.webpackJsonp||[]).push([[382],{877:function(s,r,e){"use strict";e.r(r);var a=e(30),_=Object(a.a)({},(function(){var s=this,r=s.$createElement,e=s._self._c||r;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"scrapy-redis分布式原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scrapy-redis分布式原理"}},[s._v("#")]),s._v(" scrapy_redis分布式原理")]),s._v(" "),e("h5",{attrs:{id:"学习目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[s._v("#")]),s._v(" 学习目标")]),s._v(" "),e("ol",[e("li",[s._v("了解 scarpy_redis的概念和功能")]),s._v(" "),e("li",[s._v("了解 scrapy_redis的原理")]),s._v(" "),e("li",[s._v("了解 redis数据库操作命令")])]),s._v(" "),e("hr"),s._v(" "),e("blockquote",[e("p",[s._v("在前面scrapy框架中我们已经能够使用框架实现爬虫爬取网站数据,如果当前网站的数据比较庞大, 我们就需要使用分布式来更快的爬取数据")])]),s._v(" "),e("h3",{attrs:{id:"_1-scrapy-redis是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-scrapy-redis是什么"}},[s._v("#")]),s._v(" 1 scrapy_redis是什么")]),s._v(" "),e("p",[s._v("Scrapy_redis ： Redis-based components for Scrapy.")]),s._v(" "),e("p",[s._v("Github地址："),e("a",{attrs:{href:"https://github.com/rmax/scrapy-redis",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/rmax/scrapy-redis"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("在这个地址中存在三个demo，后续我们对scrapy_redis的学习会通过这三个demo展开")]),s._v(" "),e("h3",{attrs:{id:"_2-为什么要学习scrapy-redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么要学习scrapy-redis"}},[s._v("#")]),s._v(" 2 为什么要学习scrapy_redis")]),s._v(" "),e("p",[s._v("Scrapy_redis在scrapy的基础上实现了更多，更强大的功能，具体体现在：")]),s._v(" "),e("ul",[e("li",[s._v("请求对象的持久化")]),s._v(" "),e("li",[s._v("去重的持久化")]),s._v(" "),e("li",[s._v("和实现分布式")])]),s._v(" "),e("h3",{attrs:{id:"_3-scrapy-redis的原理分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-scrapy-redis的原理分析"}},[s._v("#")]),s._v(" 3 scrapy_redis的原理分析")]),s._v(" "),e("h5",{attrs:{id:"_3-1-回顾scrapy的流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-回顾scrapy的流程"}},[s._v("#")]),s._v(" 3.1 回顾scrapy的流程")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/scrapy%E7%9A%84%E6%B5%81%E7%A8%8B.png",alt:""}})]),s._v(" "),e("p",[s._v("那么，在这个基础上，如果需要实现分布式，即多台服务器同时完成一个爬虫，需要怎么做呢？")]),s._v(" "),e("h5",{attrs:{id:"_3-2-scrapy-redis的流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-scrapy-redis的流程"}},[s._v("#")]),s._v(" 3.2 scrapy_redis的流程")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("在scrapy_redis中，所有的带抓取的对象和去重的指纹都存在所有的服务器公用的redis中")])]),s._v(" "),e("li",[e("p",[s._v("所有的服务器公用一个redis中的request对象")])]),s._v(" "),e("li",[e("p",[s._v("所有的request对象存入redis前，都会在同一个redis中进行判断，之前是否已经存入过")])]),s._v(" "),e("li",[e("p",[s._v("在默认情况下所有的数据会保存在redis中")])])]),s._v(" "),e("p",[s._v("具体流程如下：")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/scrapy_redis%E7%9A%84%E6%B5%81%E7%A8%8B.png",alt:""}})]),s._v(" "),e("h3",{attrs:{id:"_4-对于redis的复习"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-对于redis的复习"}},[s._v("#")]),s._v(" 4 对于redis的复习")]),s._v(" "),e("blockquote",[e("p",[s._v("由于时间关系,大家对redis的命令遗忘的差不多了, 但是在scrapy_redis中需要使用redis的操作命令,所有需要回顾下redis的命令操作")])]),s._v(" "),e("h5",{attrs:{id:"_4-1-redis是什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-redis是什么"}},[s._v("#")]),s._v(" 4.1 redis是什么")]),s._v(" "),e("p",[s._v("redis是一个开源的内存型数据库，支持多种数据类型和结构，比如列表、集合、有序集合等,同时可以使用redis-manger-desktop等客户端软件查看redis中的数据，关于redis-manger-desktop的使用可以参考扩展阅读")]),s._v(" "),e("h5",{attrs:{id:"_4-2-redis服务端和客户端的启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-redis服务端和客户端的启动"}},[s._v("#")]),s._v(" 4.2 redis服务端和客户端的启动")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("/etc/init.d/redis-server start")]),s._v(" 启动服务端")]),s._v(" "),e("li",[e("code",[s._v("redis-cli -h <hostname> -p <端口号>")]),s._v(" 客户端启动")])]),s._v(" "),e("h5",{attrs:{id:"_4-3-redis中的常见命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-redis中的常见命令"}},[s._v("#")]),s._v(" 4.3 redis中的常见命令")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("select 1")]),s._v(" 切换db")]),s._v(" "),e("li",[e("code",[s._v("keys *")]),s._v(" 查看所有的键")]),s._v(" "),e("li",[e("code",[s._v("tyep 键")]),s._v(" 查看键的类型")]),s._v(" "),e("li",[e("code",[s._v("flushdb")]),s._v(" 清空db")]),s._v(" "),e("li",[e("code",[s._v("flushall")]),s._v(" 清空数据库")])]),s._v(" "),e("h5",{attrs:{id:"_4-4-redis命令的复习"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-redis命令的复习"}},[s._v("#")]),s._v(" 4.4 redis命令的复习")]),s._v(" "),e("p",[s._v("redis的命令很多，这里我们简单复习后续会使用的命令")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/images/redis%E5%91%BD%E4%BB%A4%E7%9A%84%E5%A4%8D%E4%B9%A0.png",alt:""}})]),s._v(" "),e("hr"),s._v(" "),e("h3",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),e("ol",[e("li",[s._v("scarpy_redis的分布式工作原理\n"),e("ul",[e("li",[s._v("在scrapy_redis中，所有的带抓取的对象和去重的指纹都存在所有的服务器公用的redis中")]),s._v(" "),e("li",[s._v("所有的服务器公用一个redis中的request对象")]),s._v(" "),e("li",[s._v("所有的request对象存入redis前，都会在同一个redis中进行判断，之前是否已经存入过")])])])])])}),[],!1,null,null,null);r.default=_.exports}}]);