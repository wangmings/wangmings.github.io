(window.webpackJsonp=window.webpackJsonp||[]).push([[336],{831:function(s,t,e){"use strict";e.r(t);var a=e(30),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"requests模块的入门使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requests模块的入门使用"}},[s._v("#")]),s._v(" requests模块的入门使用")]),s._v(" "),e("h5",{attrs:{id:"学习目标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[s._v("#")]),s._v(" 学习目标：")]),s._v(" "),e("ol",[e("li",[s._v("了解 requests模块的介绍")]),s._v(" "),e("li",[s._v("掌握 requests的基本使用")]),s._v(" "),e("li",[s._v("掌握 response常见的属性")]),s._v(" "),e("li",[s._v("掌握 requests.text和content的区别")]),s._v(" "),e("li",[s._v("掌握 解决网页的解码问题")]),s._v(" "),e("li",[s._v("掌握 requests模块发送带headers的请求")]),s._v(" "),e("li",[s._v("掌握 requests模块发送带参数的get请求")])]),s._v(" "),e("hr"),s._v(" "),e("h3",{attrs:{id:"_1-为什么要重点学习requests模块-而不是urllib"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-为什么要重点学习requests模块-而不是urllib"}},[s._v("#")]),s._v(" 1 为什么要重点学习\brequests模块，而不是urllib")]),s._v(" "),e("ul",[e("li",[s._v("requests的底层实现就是urllib")]),s._v(" "),e("li",[s._v("requests在python2 和python3中通用，方法完全一样")]),s._v(" "),e("li",[s._v("requests简单易用")]),s._v(" "),e("li",[s._v("Requests能够自动帮助我们解压(gzip压缩的等)响应内容")])]),s._v(" "),e("h3",{attrs:{id:"_2-requests的作用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-requests的作用"}},[s._v("#")]),s._v(" 2 requests的作用")]),s._v(" "),e("p",[s._v("作用：发送网络请求，返回响应数据")]),s._v(" "),e("p",[s._v("中文文档 ： "),e("a",{attrs:{href:"http://docs.python-requests.org/zh_CN/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://docs.python-requests.org/zh_CN/latest/index.html"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("通过观察文档来学习：如何使用requests来发送网络请求")]),s._v(" "),e("h3",{attrs:{id:"_3-requests模块发送简单的get请求、获取响应"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-requests模块发送简单的get请求、获取响应"}},[s._v("#")]),s._v(" 3 requests模块发送简单的get请求、获取响应")]),s._v(" "),e("p",[s._v("需求：通过requests向百度首页发送请求，获取百度首页的数据")]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 目标url")]),s._v("\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com'")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向目标url发送get请求")]),s._v("\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印响应内容")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("text"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h5",{attrs:{id:"response的常用属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#response的常用属性"}},[s._v("#")]),s._v(" response的常用属性：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("response.text")]),s._v(" 响应体 str类型")]),s._v(" "),e("li",[e("code",[s._v("respones.content")]),s._v(" 响应体 bytes类型")]),s._v(" "),e("li",[e("code",[s._v("response.status_code")]),s._v(" 响应状态码")]),s._v(" "),e("li",[e("code",[s._v("response.request.headers")]),s._v(" 响应对应的请求头")]),s._v(" "),e("li",[e("code",[s._v("response.headers")]),s._v(" 响应头")]),s._v(" "),e("li",[e("code",[s._v("response.request.cookies")]),s._v(" 响应对应请求的cookie")]),s._v(" "),e("li",[e("code",[s._v("response.cookies")]),s._v(" 响应的cookie（经过了set-cookie动作）")])]),s._v(" "),e("h5",{attrs:{id:"思考-text是response的属性还是方法呢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#思考-text是response的属性还是方法呢"}},[s._v("#")]),s._v(" 思考：text是response的属性还是方法呢？")]),s._v(" "),e("ul",[e("li",[s._v("一般来说名词，往往都是对象的属性，对应的动词是对象的方法")])]),s._v(" "),e("h5",{attrs:{id:"_3-1-response-text-和response-content的区别"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-response-text-和response-content的区别"}},[s._v("#")]),s._v(" 3.1 response.text 和response.content的区别")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("response.text")])]),s._v(" "),e("ul",[e("li",[s._v("类型：str")]),s._v(" "),e("li",[s._v("解码类型： requests模块自动根据HTTP 头部对响应的编码作出有根据的推测，推测的文本编码")]),s._v(" "),e("li",[s._v("如何修改编码方式："),e("code",[s._v("response.encoding=”gbk”")])])])]),s._v(" "),e("li",[e("p",[e("code",[s._v("response.content")])]),s._v(" "),e("ul",[e("li",[s._v("类型：bytes")]),s._v(" "),e("li",[s._v("解码类型： 没有指定")]),s._v(" "),e("li",[s._v("如何修改编码方式："),e("code",[s._v("response.content.deocde(“utf8”)")])])])])]),s._v(" "),e("p",[s._v("获取网页源码的通用方式：")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("response.content.decode()")])]),s._v(" "),e("li",[e("code",[s._v('response.content.decode("GBK")')])]),s._v(" "),e("li",[e("code",[s._v("response.text")])])]),s._v(" "),e("p",[s._v("以上三种方法从前往后尝试，能够100%的解决所有网页解码的问题")]),s._v(" "),e("p",[s._v("所以：更推荐使用"),e("code",[s._v("response.content.deocde()")]),s._v("的方式获取响应的html页面")]),s._v(" "),e("h6",{attrs:{id:"_3-2-练习-把网络上的图片保存到本地"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-练习-把网络上的图片保存到本地"}},[s._v("#")]),s._v(" 3.2 练习：把网络上的图片保存到本地")]),s._v(" "),e("blockquote",[e("p",[s._v("我们来把"),e("code",[s._v("www.baidu.com")]),s._v("的图片保存到本地")])]),s._v(" "),e("h6",{attrs:{id:"思考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#思考"}},[s._v("#")]),s._v(" 思考：")]),s._v(" "),e("ul",[e("li",[s._v("以什么方式打开文件")]),s._v(" "),e("li",[s._v("保存什么格式的内容")])]),s._v(" "),e("p",[s._v("分析：")]),s._v(" "),e("ul",[e("li",[s._v("图片的url: "),e("a",{attrs:{href:"https://www.baidu.com/img/bd_logo1.png",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.baidu.com/img/bd_logo1.png"),e("OutboundLink")],1)]),s._v(" "),e("li",[s._v("利用requests模块发送请求获取响应")]),s._v(" "),e("li",[s._v("以2进制写入的方式打开文件，并将response响应的二进制内容写入")])]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 图片的url")]),s._v("\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com/img/bd_logo1.png'")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 响应本身就是一个图片,并且是二进制类型")]),s._v("\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# print(response.content)")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 以二进制+写入的方式打开文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("open")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'baidu.png'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wb'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 写入response.content bytes二进制类型")]),s._v("\n    f"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("write"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h3",{attrs:{id:"_4-发送带header的请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-发送带header的请求"}},[s._v("#")]),s._v(" 4 发送带header的请求")]),s._v(" "),e("blockquote",[e("p",[s._v("我们先写一个获取百度首页的代码")])]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests\n\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com'")]),s._v("\n\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印响应对应请求的请求头信息")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("headers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h5",{attrs:{id:"_4-1-思考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-思考"}},[s._v("#")]),s._v(" 4.1 思考")]),s._v(" "),e("p",[s._v("对比浏览器上百度首页的网页源码和代码中的百度首页的源码，有什么不同？")]),s._v(" "),e("p",[s._v("代码中的百度首页的源码非常少，为什么？")]),s._v(" "),e("h5",{attrs:{id:"_4-2-为什么请求需要带上header"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-为什么请求需要带上header"}},[s._v("#")]),s._v(" 4.2 为什么请求需要带上header？")]),s._v(" "),e("p",[s._v("模拟浏览器，欺骗服务器，获取和浏览器一致的内容")]),s._v(" "),e("h5",{attrs:{id:"_4-3-header的形式-字典"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-header的形式-字典"}},[s._v("#")]),s._v(" 4.3 header的形式：字典")]),s._v(" "),e("p",[e("code",[s._v('headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"}')])]),s._v(" "),e("h5",{attrs:{id:"_4-4-用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-用法"}},[s._v("#")]),s._v(" 4.4 用法")]),s._v(" "),e("p",[e("code",[s._v("requests.get(url, headers=headers)")])]),s._v(" "),e("h5",{attrs:{id:"_4-5-完整的代码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-完整的代码"}},[s._v("#")]),s._v(" 4.5 完整的代码")]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests\n\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com'")]),s._v("\n\nheaders "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User-Agent"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 在请求头中带上User-Agent，模拟浏览器发送请求")]),s._v("\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" headers"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("headers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# print(response.content)")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 打印请求头信息")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("request"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("headers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])]),e("h3",{attrs:{id:"_5-发送带参数的请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-发送带参数的请求"}},[s._v("#")]),s._v(" 5 发送带参数的请求")]),s._v(" "),e("blockquote",[e("p",[s._v("我们在使用百度搜索的时候经常发现url地址中会有一个 "),e("code",[s._v("?")]),s._v("，那么该问号后边的就是请求参数，又叫做查询字符串")])]),s._v(" "),e("h5",{attrs:{id:"_5-1-什么叫做请求参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-什么叫做请求参数"}},[s._v("#")]),s._v(" 5.1 什么叫做请求参数：")]),s._v(" "),e("p",[s._v("例1： "),e("a",{attrs:{href:"http://www.webkaka.com/tutorial/server/2015/021013/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://www.webkaka.com/tutorial/server/2015/021013/"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("例2："),e("a",{attrs:{href:"https://www.baidu.com/s?wd=python&a=c",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.baidu.com/s?wd=python&a=c"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("例1中没有请求参数！例2中?后边的就是请求参数")]),s._v(" "),e("h5",{attrs:{id:"_5-2-请求参数的形式-字典"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-请求参数的形式-字典"}},[s._v("#")]),s._v(" 5.2 请求参数的形式：字典")]),s._v(" "),e("p",[e("code",[s._v("kw = {'wd':'长城'}")])]),s._v(" "),e("h5",{attrs:{id:"_5-3-请求参数的用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-请求参数的用法"}},[s._v("#")]),s._v(" 5.3 请求参数的用法")]),s._v(" "),e("p",[e("code",[s._v("requests.get(url,params=kw)")])]),s._v(" "),e("h5",{attrs:{id:"_5-4-关于参数的注意点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-关于参数的注意点"}},[s._v("#")]),s._v(" 5.4 关于参数的注意点")]),s._v(" "),e("p",[s._v("在url地址中， 很多参数是没有用的，比如百度搜索的url地址，其中参数只有一个字段有用，其他的都可以删除 如何确定那些请求参数有用或者没用：挨个尝试！ 对应的,在后续的爬虫中，越到很多参数的url地址，都可以尝试删除参数")]),s._v(" "),e("h4",{attrs:{id:"_5-5-两种方式-发送带参数的请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-两种方式-发送带参数的请求"}},[s._v("#")]),s._v(" 5.5 两种方式：发送带参数的请求")]),s._v(" "),e("h5",{attrs:{id:"_5-5-1-对https-www-baidu-com-s-wd-python发起请求可以使用requests-get-url-params-kw-的方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-1-对https-www-baidu-com-s-wd-python发起请求可以使用requests-get-url-params-kw-的方式"}},[s._v("#")]),s._v(" 5.5.1 对"),e("code",[s._v("https://www.baidu.com/s?wd=python")]),s._v("发起请求可以使用"),e("code",[s._v("requests.get(url, params=kw)")]),s._v("的方式")]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式一：利用params参数发送带参数的请求")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests\n\nheaders "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User-Agent"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是目标url")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# url = 'https://www.baidu.com/s?wd=python' ")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 最后有没有问号结果都一样")]),s._v("\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com/s?'")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 请求参数是一个字典 即wd=python")]),s._v("\nkw "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'wd'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'python'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 带上请求参数发起请求，获取响应")]),s._v("\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" headers"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("headers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" params"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kw"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 当有多个请求参数时，requests接收的params参数为多个键值对的字典，比如 '?wd=python&a=c'--\x3e{'wd': 'python', 'a': 'c'}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("response"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("content"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br")])]),e("h5",{attrs:{id:"_5-5-2-也可以直接对https-www-baidu-com-s-wd-python完整的url直接发送请求-不使用params参数"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-2-也可以直接对https-www-baidu-com-s-wd-python完整的url直接发送请求-不使用params参数"}},[s._v("#")]),s._v(" 5.5.2 也可以直接对"),e("code",[s._v("https://www.baidu.com/s?wd=python")]),s._v("完整的url直接发送请求，不使用params参数")]),s._v(" "),e("div",{staticClass:"language-Python line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-python"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 方式二：直接发送带参数的url的请求")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" requests\n\nheaders "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"User-Agent"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nurl "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'https://www.baidu.com/s?wd=python'")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kw = {'wd': 'python'}")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# url中包含了请求参数，所以此时无需params")]),s._v("\nresponse "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" headers"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("headers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br")])]),e("h3",{attrs:{id:"_6-作业"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_6-作业"}},[s._v("#")]),s._v(" 6 作业")]),s._v(" "),e("p",[s._v("1.获取新浪首页，查看response.text 和response.content.decode()的区别")]),s._v(" "),e("p",[s._v("2.实现任意贴吧的爬虫，保存网页到本地")]),s._v(" "),e("hr"),s._v(" "),e("h3",{attrs:{id:"小结"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#小结"}},[s._v("#")]),s._v(" 小结")]),s._v(" "),e("ol",[e("li",[s._v("requests模块的介绍：能够帮助我们发起请求获取响应")]),s._v(" "),e("li",[s._v("requests的基本使用："),e("code",[s._v("requests.get(url)")])]),s._v(" "),e("li",[s._v("以及response常见的属性：\n"),e("ul",[e("li",[e("code",[s._v("response.text")]),s._v(" 响应体 str类型")]),s._v(" "),e("li",[e("code",[s._v("respones.content")]),s._v(" 响应体 bytes类型")]),s._v(" "),e("li",[e("code",[s._v("response.status_code")]),s._v(" 响应状态码")]),s._v(" "),e("li",[e("code",[s._v("response.request.headers")]),s._v(" 响应对应的请求头")]),s._v(" "),e("li",[e("code",[s._v("response.headers")]),s._v(" 响应头")]),s._v(" "),e("li",[e("code",[s._v("response.request._cookies")]),s._v(" 响应对应请求的cookie")]),s._v(" "),e("li",[e("code",[s._v("response.cookies")]),s._v(" 响应的cookie（经过了set-cookie动作）")])])]),s._v(" "),e("li",[s._v("掌握 requests.text和content的区别：text返回str类型，content返回bytes类型")]),s._v(" "),e("li",[s._v("掌握 解决网页的解码问题：\n"),e("ul",[e("li",[e("code",[s._v("response.content.decode()")])]),s._v(" "),e("li",[e("code",[s._v('response.content.decode("GBK")')])]),s._v(" "),e("li",[e("code",[s._v("response.text")])])])]),s._v(" "),e("li",[s._v("掌握 requests模块发送带headers的请求："),e("code",[s._v("requests.get(url, headers={})")])]),s._v(" "),e("li",[s._v("掌握 requests模块发送带参数的get请求："),e("code",[s._v("requests.get(url, params={})")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);